!function(e,n){"undefined"!=typeof exports?"undefined"!=typeof module&&(exports=module.exports=n(e,exports)):"function"==typeof define&&define.amd?define(["exports"],function(t){e.Gpxmake=n(e,t)}):e.Gpxmake=n()}(this,function(){"use strict";function e(e){this.metadata="",this.track="",this.route="",this.waypoints="",i=o.extend(i,e),this.metadata=n(i)}function n(e){var n="<metadata>\n";e.name&&(n+="<name>"+e.name+"</name>\n"),e.desc&&(n+="<desc>"+e.desc+"</desc>\n"),e.time&&(n+="<time>"+e.time+"</time>\n"),e.keywords&&(n+="<keywords>"+e.keywords+"</keywords>\n");var t=e.author;t&&(n+="<author>\n",t.name&&(n+="<name>"+t.name+"</name>\n"),t.email&&(t.email.id&&t.email.domain?n+='<email id="'+t.email.id+'" domain="'+t.email.domain+'" />\n':console.warn("<email> element should have id and domain information.")),t.link&&(t.link.href?(n+='<link href="'+t.link.href+'">\n',t.link.text&&(n+="<text>"+t.link.text+"</text>\n"),t.link.type&&(n+="<type>"+t.link.type+"</type>\n"),n+="</link>\n"):console.warn("<link> element should have href information.")),n+="</author>\n");var a=e.copyright;a&&(a.author?(n+='<copyright author="'+a.author+'">\n',a.year&&(n+="<year>"+a.year+"</year>\n"),a.licence&&(n+="<licence>"+a.licence+"</licence>\n"),n+="</copyright>\n"):console.warn("<copyright> element should have author information."));var i=e.link;i&&(i.href?(n+='<link href="'+i.href+'">\n',i.text&&(n+="<text>"+i.text+"</text>\n"),i.type&&(n+="<type>"+i.type+"</type>\n"),n+="</link>"):console.warn("<link> element should have href information."));var o=e.bounds;return o&&(o.minlat&&o.minlon&&o.maxlat&&o.maxlon?n+='<bounds minlat="'+o.minlat+'" minlon="'+o.minlon+'" maxlat="'+o.maxlat+'" maxlon="'+o.maxlon+'" />\n':console.warn("<bounds> element should have minlat, minlon, maxlat and maxlon information.")),n+="</metadata>\n"}function t(e,n,t,a){var i='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<gpx xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.1" creator="gpxmake.js" xmlns="http://www.topografix.com/GPX/1/1">\n';return i+=e,i+=n,i+=t,i+=a,i+="</gpx>"}var a={rteType:["name","cmt","desc","src","link","number","type"],trkType:["name","cmt","desc","src","link","number","type"],wptType:["lat","lon","ele","time","magvar","geoidheight","name","cmt","desc","src","url","urlname","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]},i={creator:"gpxmake"};e.prototype.download=function(e){e+=".gpx";var n=t(this.metadata,this.track,this.route,this.waypoints),a=new Blob([n],{type:"application/xml"}),i=document.createElement("a");document.body.appendChild(i),o.detectIE()?window.navigator.msSaveOrOpenBlob(a,e):(i.href=window.URL.createObjectURL(a),i.download=e,i.click())},e.prototype.addTrack=function(e){var n="<trk>\n";for(var t in e)if("string"==typeof e[t])a.trkType.indexOf(t)!=-1?n+="<"+t+">"+e[t]+"</"+t+">\n":console.warn("'"+t+"' is not a valid gpx file element.");else if("link"==t){var i=e.link;i.href&&(n+='<link href="'+i.href+'">',i.text&&(n+="<text>"+i.text+"</text>\n"),i.type&&(n+="<type>"+i.type+"</type>\n"),n+="</link>")}n+="<trkseg>\n";var o=e.points;if(o)for(var r=0;r<o.length;r++){var l=o[r].lat,p=o[r].lon;if(!l||!p)throw"Trackpoints should have lat and lon information. Please reorganize your data.";n+='<trkpt lat="'+l+'" lon="'+p+'">\n';for(var t in o[r])if("lat"!=t&&"lon"!=t)if(a.wptType.indexOf(t)!=-1)if("link"==t){var i=o[r].link;i.href&&(n+='<link href="'+i.href+'">',i.text&&(n+="<text>"+i.text+"</text>\n"),i.type&&(n+="<type>"+i.type+"</type>\n"),n+="</link>")}else n+="<"+t+">"+o[r][t]+"</"+t+">\n";else console.warn("'"+t+"' is not a valid gpx file element.");n+="</trkpt>\n"}else console.warn("No track points defined");n+="</trkseg>\n",n+="</trk>\n",this.track=n},e.prototype.addRoute=function(e){var n="<rte>\n";for(var t in e)if("string"==typeof e[t])a.trkType.indexOf(t)!=-1?n+="<"+t+">"+e[t]+"</"+t+">\n":console.warn("'"+t+"' is not a valid gpx file element.");else if("link"==t){var i=e.link;i.href&&(n+='<link href="'+i.href+'">',i.text&&(n+="<text>"+i.text+"</text>\n"),i.type&&(n+="<type>"+i.type+"</type>\n"),n+="</link>")}var o=e.points;if(o)for(var r=0;r<o.length;r++){var l=o[r].lat,p=o[r].lon;if(!l||!p)throw"Routepoints should have lat and lon information. Please reorganize your data.";n+='<rtept lat="'+l+'" lon="'+p+'">\n';for(var t in o[r])if("lat"!=t&&"lon"!=t)if(a.wptType.indexOf(t)!=-1)if("link"==t){var i=o[r].link;i.href&&(n+='<link href="'+i.href+'">',i.text&&(n+="<text>"+i.text+"</text>\n"),i.type&&(n+="<type>"+i.type+"</type>\n"),n+="</link>")}else n+="<"+t+">"+o[r][t]+"</"+t+">\n";else console.warn("'"+t+"' is not a valid gpx file element.");n+="</rtept>\n"}else console.warn("No route points defined");n+="</rte>\n",this.route=n},e.prototype.addWaypoints=function(e){var n="";if(e)for(var t=0;t<e.length;t++){var i=e[t].lat,o=e[t].lon;if(!i||!o)throw"Waypoints should have lat and lon information. Please reorganize your data.";n+='<wpt lat="'+i+'" lon="'+o+'">\n';for(var r in e[t])if("lat"!=r&&"lon"!=r)if(a.wptType.indexOf(r)!=-1)if("link"==r){var l=e[t].link;l.href&&(n+='<link href="'+l.href+'">',l.text&&(n+="<text>"+l.text+"</text>\n"),l.type&&(n+="<type>"+l.type+"</type>\n"),n+="</link>")}else n+="<"+r+">"+e[t][r]+"</"+r+">\n";else console.warn("'"+r+"' is not a valid gpx file element.");n+="</wpt>\n"}else console.warn("No waypoints defined");this.waypoints=n};var o=function(){return{extend:function(){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(arguments[0][n]=arguments[e][n]);return arguments[0]},detectIE:function(){var e=window.navigator.userAgent,n=e.indexOf("MSIE "),t=e.indexOf("Trident/"),a=e.indexOf("Edge/");return n>0||t>0||a>0}}}();return e});
//# sourceMappingURL=gpxmake.min.js.map
